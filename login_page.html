<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <!--for favicon-->
	<link rel="icon" href="assets/digima_logo.svg">
    <!-- CSS link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
	<link rel="stylesheet" href="night-mode.css">
	<link rel="stylesheet" href="social-login.css">
</head>

<body>
     <div id="navbar-container"></div>

    <div class="container-fuild">
        <div class="row justify-content-center align-items-center vh-100 overflow-auto flex-wrap">
            <div class="col-lg-4 mx-auto">
                <!-- LOGIN FORM -->
                <form id="login-form" class="d-flex justify-content-center align-items-center">
                    <div class="d-flex flex-column justify-content-lg-center p-4 p-lg-0 pb-0 flex-fill">
                        <div class="mx-auto mb-5 text-center">
                            <img src="assets/digima_logo.svg" class="img-fluid" style="width: 120px;">
                        </div>
                        <div class="card border-0 p-lg-3 shadow-lg">
                            <div class="card-body">
                                <!-- Night mode toggle -->
                                <div class="toggle-switch" id="modeToggle">
                                    <div class="toggle-circle" id="toggleCircle">üåô</div>
                                </div>
                                <div class="text-center mb-3">
                                    <h5>Sign In</h5>
                                </div>
                                <!-- Email -->
                                <div class="mb-3">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" id="login-email" class="form-control" placeholder="Email" required>
                                </div>
                                <!-- Password -->
                                <div class="mb-3">
                                    <label class="form-label">Password</label>
                                    <input type="password" id="login-password" class="form-control" placeholder="Password" required>
                                </div>
                                <!-- Sign In Button -->
                                <div class="mb-1">
                                    <button type="submit" class="btn btn-dark w-100">Sign In</button>
                                </div>
                                <div class="login-or"></div>
                                <span class="span-or">Or:</span>
                                <div class="d-flex align-items-center justify-content-center flex-wrap">
                                    <div class="text-center me-2 flex-fill">
                                        <a href="javascript:void(0);" id="github-login" 
                                           class="social-login-btn br-10 p-1 btn d-flex align-items-center justify-content-center">
                                            <img class="img-fluid m-1" src="assets/github.svg" alt="GitHub">
     										<span class="ms-2">GitHub</span>
                                        </a>
                                    </div>
                                    <div class="text-center me-2 flex-fill">
                                        <a href="javascript:void(0);" id="google-login" 
                                           class="social-login-btn br-10 p-1 btn d-flex align-items-center justify-content-center">
                                            <img class="img-fluid m-1" src="assets/google.svg" alt="Google">
     										<span class="ms-2">Google</span>
                                        </a>
                                    </div>
                                </div>
                                <div class="text-center mt-3">
                                    <h6>Don‚Äôt have an account yet?
                                        <a href="register_page.html">Sign up</a>
                                    </h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- END LOGIN FORM -->
            </div>
        </div>
    </div>

    <!-- JavaScript link -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="firebase-auth.js"></script>
    <script type="module" src="navbar.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, GoogleAuthProvider, GithubAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";
    
    const firebaseConfig = {
        apiKey: "AIzaSyCnbjB7QqmbuyxaKtBOiEI5Do4rsKmHWrY",
        authDomain: "digima-cb2fc.firebaseapp.com",
        projectId: "digima-cb2fc",
        storageBucket: "digima-cb2fc.firebasestorage.app",
        messagingSenderId: "498606156423",
        appId: "1:498606156423:web:dd642f8202a85bc473e622",
        measurementId: "G-1E2QX3R9NH"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const googleProvider = new GoogleAuthProvider();
    const githubProvider = new GithubAuthProvider();

    function signInWithProvider(provider) {
    signInWithPopup(auth, provider)
        .then(() => window.location.href = "home.html")
        .catch(err => {
            if (err.code === "auth/cancelled-popup-request" || err.code === "auth/popup-closed-by-user") {
                console.log(`${provider.providerId} popup closed by user.`);
                return; // silently ignore
            }
            alert(err.message);
        });
    }

    
    // Email login
    document.getElementById("login-form").addEventListener("submit", (e) => {
        e.preventDefault();
        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;
    
        signInWithEmailAndPassword(auth, email, password)
            .then(() => window.location.href = "home.html")
            .catch(err => alert(err.message));
    });
    
    document.getElementById("google-login").addEventListener("click", () => {
    signInWithProvider(googleProvider);
    });

    document.getElementById("github-login").addEventListener("click", () => {
        signInWithProvider(githubProvider);
    });
    
    </script>

	<script>
    const toggleSwitch = document.getElementById('modeToggle');
    const toggleCircle = document.getElementById('toggleCircle');
    const body = document.body;
    
    // Load saved theme on page load
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "night") {
        body.classList.add("night-mode");
        toggleCircle.textContent = '‚òÄÔ∏è';
    } else {
        toggleCircle.textContent = 'üåô';
    }
    
    // Toggle theme on click
    toggleSwitch.addEventListener('click', () => {
        body.classList.toggle('night-mode');
    
        if (body.classList.contains('night-mode')) {
            localStorage.setItem("theme", "night");
            toggleCircle.textContent = '‚òÄÔ∏è';
        } else {
            localStorage.setItem("theme", "day");
            toggleCircle.textContent = 'üåô';
        }
    });

    // Load saved theme on page load
    setTheme(localStorage.getItem("theme") === "night");
    </script>




</body>


</html>