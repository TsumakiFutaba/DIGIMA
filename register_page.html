<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <!-- Favicon -->
    <link rel="icon" href="assets/digima_logo.svg">
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <!-- Global Styles -->
    <link rel="stylesheet" href="styles.css">
    <!-- Register Page Styles -->
    <link rel="stylesheet" href="register.css">
    <link rel="stylesheet" href="social-login.css">

</head>
<body> 

    <div class="container-fluid">
        <div class="w-100 overflow-hidden position-relative flex-wrap d-block vh-100">	
            <!-- Register Form -->
            <div class="row justify-content-center align-items-center vh-100 overflow-auto flex-wrap">
                <div class="col-lg-4 mx-auto register-container">
                    <form id="register-form" class="d-flex justify-content-center align-items-center">
                        <div class="d-flex flex-column justify-content-lg-center p-4 p-lg-0 pb-0 flex-fill">
                            <div class="mx-auto mb-5 text-center">
                                <img src="assets/digima_logo.svg" class="img-fluid" alt="Logo" style="width: 120px; height: auto;">
                            </div>
                            <div class="card border-0 p-lg-3 shadow-lg rounded-2">
                                <div class="card-body">
									<div class="register-toggle-wrapper">
                                        <div id="modeToggle" class="toggle-switch">
                                            <div id="toggleCircle" class="toggle-circle">🌙</div>
                                        </div>
                                    </div>
                                    <div class="text-center mb-3">
                                        <h5 class="mb-2">Sign Up</h5>
                                    </div>

                                    <!-- Full Name -->
                                    <div class="mb-3">
                                        <label class="form-label">Full Name</label>
                                        <div class="input-group">
                                            <span class="input-group-text border-end-0">
                                                <i class="isax isax-profile"></i>
                                            </span>
                                            <input type="text" id="register-name" class="form-control border-start-0 ps-0" placeholder="Name" required>
                                        </div>
                                    </div>

                                    <!-- Email -->
                                    <div class="mb-3">
                                        <label class="form-label">Email Address</label>
                                        <div class="input-group">
                                            <span class="input-group-text border-end-0">
                                                <i class="isax isax-sms-notification"></i>
                                            </span>
                                            <input type="email" id="register-email" class="form-control border-start-0 ps-0" placeholder="Enter Email Address" required>
                                        </div>
                                    </div>

                                    <!-- Password -->
                                    <div class="mb-3">
                                        <label class="form-label">Password</label>
                                        <div class="pass-group input-group">
                                            <span class="input-group-text border-end-0">
                                                <i class="isax isax-lock"></i>
                                            </span>
                                            <span class="isax toggle-password isax-eye-slash"></span>
                                            <input type="password" id="register-password" class="pass-input form-control border-start-0 ps-0" placeholder="****************" required>
                                        </div>
                                    </div>

                                    <!-- Confirm Password -->
                                    <div class="mb-3">
                                        <label class="form-label">Confirm Password</label>
                                        <div class="pass-group input-group">
                                            <span class="input-group-text border-end-0">
                                                <i class="isax isax-lock"></i>
                                            </span>
                                            <span class="isax toggle-passwords isax-eye-slash"></span>
                                            <input type="password" id="register-confirm" class="pass-input form-control border-start-0 ps-0" placeholder="****************" required>
                                        </div>
                                    </div>

                                    <!-- Terms -->
                                    <div class="d-flex align-items-center justify-content-between mb-3 register-terms">
                                        <div class="form-check form-check-md mb-0">
                                            <input class="form-check-input" id="remember_me" type="checkbox">
                                            <label for="remember_me" class="form-check-label mt-0">I agree to the</label>
                                            <div class="d-inline-flex">
                                                <a href="#" class="me-1">Terms of Service</a> and <a href="#" class="ms-1">Privacy Policy</a>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Sign Up Button -->
                                    <div class="mb-1">
                                        <button type="submit" class="btn btn-signup w-100">Sign Up</button>
                                    </div>

                                    <!-- OR Separator -->
                                    <div class="login-or">
                                        <span class="span-or">Or:</span>
                                    </div>

                                    <div class="mb-3">
                                        <div class="d-flex align-items-center justify-content-center gap-2">
                                            <!-- GitHub -->
                                            <a href="javascript:void(0);" id="github-login" 
                                               class="social-login-btn br-10 p-1 btn d-flex align-items-center justify-content-center flex-fill">
                                                <img class="img-fluid m-1" src="assets/github.svg" alt="GitHub">
                                                <span class="ms-2">GitHub</span>
                                            </a>
                                    
                                            <!-- Google -->
                                            <a href="javascript:void(0);" id="google-login" 
                                               class="social-login-btn br-10 p-1 btn d-flex align-items-center justify-content-center flex-fill">
                                                <img class="img-fluid m-1" src="assets/google.svg" alt="Google">
                                                <span class="ms-2">Google</span>
                                            </a>
                                        </div>
                                    </div>
    

                                    <!-- Sign In Link -->
                                   <div class="text-center pt-3">
                                       <h6 class="fw-normal fs-14 mb-0">Already have an account?
                                           <a href="login_page.html" class="hover-a"> Sign In</a>
                                       </h6>
                                   </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- End Register -->

        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="navbar.js"></script>

    <!-- Firebase Registration Script -->
    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, GoogleAuthProvider, GithubAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";
    const firebaseConfig = {
        apiKey: "AIzaSyCnbjB7QqmbuyxaKtBOiEI5Do4rsKmHWrY",
        authDomain: "digima-cb2fc.firebaseapp.com",
        projectId: "digima-cb2fc",
        storageBucket: "digima-cb2fc.firebasestorage.app",
        messagingSenderId: "498606156423",
        appId: "1:498606156423:web:dd642f8202a85bc473e622",
        measurementId: "G-1E2QX3R9NH"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const googleProvider = new GoogleAuthProvider();
    const githubProvider = new GithubAuthProvider();

    function signInWithProvider(provider) {
    signInWithPopup(auth, provider)
        .then(() => window.location.href = "home.html")
        .catch(err => {
            if (err.code === "auth/cancelled-popup-request" || err.code === "auth/popup-closed-by-user") {
                console.log(`${provider.providerId} popup closed by user.`);
                return; // silently ignore
            }
            alert(err.message);
        });
    } 

    
    // Email Registration
    document.getElementById("register-form").addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("register-name").value.trim();
        const email = document.getElementById("register-email").value.trim();
        const password = document.getElementById("register-password").value;
        const confirm = document.getElementById("register-confirm").value;
    
        if (password !== confirm) {
            alert("Passwords do not match");
            return;
        }
    
        createUserWithEmailAndPassword(auth, email, password)
            .then(userCred => {
                return updateProfile(userCred.user, { displayName: name });
            })
            .then(() => {
                alert("Registration successful!");
                window.location.href = "home.html";
            })
            .catch(err => alert(err.message));
    });
    
    document.getElementById("google-register").addEventListener("click", () => {
        signInWithProvider(googleProvider);
    });
    
    document.getElementById("github-register").addEventListener("click", () => {
        signInWithProvider(githubProvider);
    });



    </script>

    <!-- Night Mode Script -->
    <script>
    const toggleSwitch = document.getElementById('modeToggle');
    const toggleCircle = document.getElementById('toggleCircle');
    const body = document.body;
    
    if (localStorage.getItem('theme') === 'night') {
        body.classList.add('night-mode');
        toggleCircle.textContent = '☀️';
        toggleCircle.style.left = '33px';
    }
    
    toggleSwitch.addEventListener('click', () => {
        body.classList.toggle('night-mode');
        const isNight = body.classList.contains('night-mode');
        toggleCircle.textContent = isNight ? '☀️' : '🌙';
        toggleCircle.style.left = isNight ? '33px' : '3px';
        localStorage.setItem('theme', isNight ? 'night' : 'light');
    });
    </script>

</body>
</html>
